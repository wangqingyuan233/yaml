# V1.4 
# æŠ“å–ç¨‹åºï¼šhttps://github.com/zu1k/proxypool
# èŠ‚ç‚¹è®¢é˜…ï¼šhttps://hello.stgod.com
# è§„åˆ™è®¢é˜…ï¼šhttps://github.com/Loyalsoldier/clash-rules
# å‚è€ƒæ–‡ç« ï¼šhttps://senjianlu.com/2021/11/clash-note-03

# port of HTTP
# port: 7890

# port of SOCKS5
# socks-port: 7891

# (HTTP and SOCKS5 in one port)
mixed-port: 7890

# redir port for Linux and macOS
# redir-port: 7892

allow-lan: true
mode: rule
log-level: info
external-controller: 0.0.0.0:9090

#### TUNæ¨¡å¼  ####
dns:
  enable: true
  enhanced-mode: fake-ip
  nameserver:
    - 114.114.114.114 # çœŸå®è¯·æ±‚DNSï¼Œå¯å¤šè®¾ç½®å‡ ä¸ª
tun:
  enable: true
  stack: system # æˆ– gvisor
  dns-hijack: # DNSåŠ«æŒè®¾ç½®ä¸ºç³»ç»ŸDNS
    - 1.0.0.1:53 # è¯·å‹¿æ›´æ”¹

#### èŠ‚ç‚¹åˆ—è¡¨ ####
proxies: 

#### é€‰æ‹©èŠ‚ç‚¹ #####
proxy-groups: 
  - name: ğŸš€ èŠ‚ç‚¹é€‰æ‹© 
    type: select 
    proxies:
      - ğŸ– æ‰‹åŠ¨é€‰æ‹©
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - ğŸ¥¢ ä¸œæ–¹å›½å®¶
      - ğŸ´ è¥¿æ–¹å›½å®¶
      - DIRECT
      - REJECT
  - name: ğŸ– æ‰‹åŠ¨é€‰æ‹© 
    type: select 
    use: 
      - all 
  - name: â™»ï¸ è‡ªåŠ¨é€‰æ‹© 
    type: url-test 
    use: 
      - all 
    url: 'http://www.gstatic.com/generate_204' 
    interval: 60 
  - name: ğŸ¥¢ ä¸œæ–¹å›½å®¶
    type: url-test
    use:
      - east
    url: 'http://www.gstatic.com/generate_204'
    interval: 60
  - name: ğŸ´ è¥¿æ–¹å›½å®¶
    type: url-test
    use:
      - west
    url: 'http://www.gstatic.com/generate_204'
    interval: 60
  - name: ğŸŸ æ¼ç½‘ä¹‹é±¼
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - DIRECT

##### èŠ‚ç‚¹è®¢é˜… #####
proxy-providers: 
  all: 
    type: http 
    url: "https://hello.stgod.com/clash/proxies?c=JP,KR,SG,DE,FR,NO,RO,SE,ZZ" 
    path: hello.stgod.com/provider.yaml 
    interval: 1200
    health-check: 
      enable: true 
      interval: 60 
      url: http://www.gstatic.com/generate_204 
  east:
    type: http
    url: "https://hello.stgod.com/clash/proxies?c=JP,KR,SG"
    path: ./proxy/east.yaml
    interval: 1200
    health-check:
      enable: true
      interval: 60
      url: http://www.gstatic.com/generate_204
  west:
    type: http
    url: "https://hello.stgod.com/clash/proxies?c=DE,FR,NO,RO,SE,ZZ"
    path: ./proxy/west.yaml
    interval: 1200
    health-check:
      enable: true
      interval: 60
      url: http://www.gstatic.com/generate_204

##### è§„åˆ™è®¢é˜… #####
rule-providers:
  reject:  #å¹¿å‘Šæ‹¦æˆª
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt"
    path: ./ruleset/reject.yaml
    interval: 43200
  icloud:  #iCloud åŸŸååˆ—è¡¨
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/icloud.txt"
    path: ./ruleset/icloud.yaml
    interval: 86400
  apple:  #Apple åœ¨ä¸­å›½å¤§é™†å¯ç›´è¿çš„åŸŸååˆ—è¡¨
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/apple.txt"
    path: ./ruleset/apple.yaml
    interval: 43200
  google:  #[æ…ç”¨]Google åœ¨ä¸­å›½å¤§é™†å¯ç›´è¿çš„åŸŸååˆ—è¡¨
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/google.txt"
    path: ./ruleset/google.yaml
    interval: 43200
  proxy:  #ä»£ç†åŸŸååˆ—è¡¨
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt"
    path: ./ruleset/proxy.yaml
    interval: 43200
  direct:  #ç›´è¿åŸŸååˆ—è¡¨
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/direct.txt"
    path: ./ruleset/direct.yaml
    interval: 43200
  private:  #ç§æœ‰ç½‘ç»œä¸“ç”¨åŸŸååˆ—è¡¨
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/private.txt"
    path: ./ruleset/private.yaml
    interval: 43200
  gfw:  #GFWList åŸŸååˆ—è¡¨
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/gfw.txt"
    path: ./ruleset/gfw.yaml
    interval: 43200
  greatfire:  #GreatFire åŸŸååˆ—è¡¨
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/greatfire.txt"
    path: ./ruleset/greatfire.yaml
    interval: 43200 
  tld-not-cn:  #éä¸­å›½å¤§é™†ä½¿ç”¨çš„é¡¶çº§åŸŸååˆ—è¡¨
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/tld-not-cn.txt"
    path: ./ruleset/tld-not-cn.yaml
    interval: 843200
  telegramcidr:  #Telegram ä½¿ç”¨çš„ IP åœ°å€åˆ—è¡¨
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/telegramcidr.txt"
    path: ./ruleset/telegramcidr.yaml
    interval: 43200
  cncidr:  #ä¸­å›½å¤§é™† IP åœ°å€åˆ—è¡¨
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.txt"
    path: ./ruleset/cncidr.yaml
    interval: 43200
  lancidr:  #å±€åŸŸç½‘ IP åŠä¿ç•™ IP åœ°å€åˆ—è¡¨
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt"
    path: ./ruleset/lancidr.yaml
    interval: 843200
  applications:  #éœ€è¦ç›´è¿çš„å¸¸è§è½¯ä»¶åˆ—è¡¨
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/applications.txt"
    path: ./ruleset/applications.yaml
    interval: 43200

##### è§„åˆ™åˆ—è¡¨ #####
rules:
  - RULE-SET,applications,DIRECT
  - DOMAIN,clash.razord.top,DIRECT
  - DOMAIN,yacd.haishan.me,DIRECT
  - RULE-SET,private,DIRECT
  - RULE-SET,reject,REJECT
  - RULE-SET,icloud,DIRECT
  - RULE-SET,apple,DIRECT
  - RULE-SET,google,DIRECT
  - RULE-SET,proxy,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,direct,DIRECT
  - RULE-SET,lancidr,DIRECT
  - RULE-SET,cncidr,DIRECT
  - RULE-SET,telegramcidr,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOIP,,DIRECT
  - GEOIP,CN,DIRECT
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼
